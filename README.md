# CurrencyConverter

**Описание задачи**

Реализовать Android приложение со следующими функциями:
1. Загружать список валют с сайта ЦБ https://www.cbr-xml-daily.ru/daily_json.js и отображать 
его в виде списка
2. Предоставлять возможность конвертировать указанную сумму в рублях в выбранную 
валюту
3. Сохранять данные о курсах валют и не перезагружать их при повороте экрана или 
перезапуске приложения. Добавить возможность перезагрузить список курсов вручную.
4. Периодически обновлять курсы валют

Первая функция обязательна. Реализованные функции 2-4 будут увеличивать ваш шанс попасть на 
курс.

Приложение должно быть реализовано на языке java или kotlin. 
Можно пользоваться любыми 
библиотеками, но необходимо объяснить в сопроводительном письме к заданию, почему каждая 
из библиотек была вами использована и почему именно эта, а не ее аналог.

Исходный код выполненного задания должен быть размещен в git репозитории 
(например, на github.com или bitbucket.org).


**План работ**:
1) Детализировать требования (
    макет
    UC/feature
        -* при первом заходе обучение(onboarding)
        - обновление курсов валют по кнопке или *по swipe down
        - при нажатии на валюту
            1) переход к экрану конвертации для выбранной (по которой произошо нажатие) валюты
            2) введение значения для конвертации
            3) [значение введено] по нажатию кнопки конвертации - отображение значения
        - при повороте экрана сохранение состояния (значений на экранах списка и конвертации)
        - при повторном входе при актуальности данных получение данных с кэша
2) Декомпозиция задач
    экраны
        - экран списка валют
            - блок времени
                - время последнего обновления данных
                - время за которое выводится информация о курсе валют
            - список валют
                - список элементов (набор "контейнеров")
                - данные о валюте ("контейнер")
                    - код валюты
                    - название валюты
                    - значение курса валюты
                    - номинал валюты (со значением)

        - экран конвертации
    модель
        - курс валюты
        - конвертация курсов

    механика приложения
        - выбор значения валюты (в зависимости от даты: value или previous)
        - переход между activity

        - место хранения данных (json с цб) в приложении
        - загрузка-выгрузка данных
        - разбор json файла
        - кэширование данных (когда использовать данные приложения вместо подключения)

        - разрешение на доступ к интернету
        - запрос файла с сайта цб (с сохранением файла и обновления даты

        - сохранение состояния при поворотах экрана

3) Проектирование решения
        abstract class Currency(
        )

        class CBRCurrency extend Currency{
            id,
            numCode,
            charCode,
            nominal,
            value
            previous
        }

        interface CurrencyConverter(){
            public double convert(double quantity, Currency fromCurrency, Currency toCurrency);
        }

        class RublesCurrencyConverter implementation CurrencyConverter{
        }

        class ExchangeRateDate(
            date
        )

        class ReportUpdateDate(
            date
        )


        + Сервисные классы по
            - считыванию файла по ссылке
            - таймер (на основе разницы времен?)
                + "кэш контроллер" (запрос обновления при протухании файла)
            - json преобразователь

        + View
            - 2 activity
            - loader на загрузку файла
            - тост по успешному завершению

4) Реализация
5) Тестирование
6) Дополнительно:
    ? правила округления при конвертации валют
        Округление в бОльшую сторону до 0,01

    ? часовые пояса в данном времени курса
    ? оценить периодизацию обновлений курсов

    ? сохранение состояния при повороте
        https://developer.android.com/topic/libraries/architecture/saving-states

    ? способ кэширования
        требований на расширение/объемы данных нет, так что без заморочек - сохранение json файла в приложении

    ? выбор библиотеки для разбора json файла
        GSON
            функционал базовый: записать/прочитать json, поэтому
            требований к библиотеке (расширения форматов/ размера библиотек/скорости работы) нет.
            Основной выбор между gson/jackson/moshi (технические аспекты тут https://www.ericdecanini.com/2020/09/29/gson-vs-jackson-vs-moshi-the-best-android-json-parser/),
            поэтому выбрал наиболее популярную (https://www.appbrain.com/stats/libraries/tag/json/json-parsing-libraries), тем более что Google поддерживает

    ? что такое/настройка backup_descriptor.xml  (добавленного ide)

    ? swipe для обновления курса (запроса файла)
        https://developer.android.com/training/swipe/add-swipe-interface

    ? возможные варианты ошибок и их обработка
    ? логгирование
    ? ui тестирование

    ? onboading
        https://developer.android.com/training/tv/playback/onboarding